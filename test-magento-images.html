<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🖼️ MAGENTO IMAGE URL TESTER</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 2rem; background: #f5f5f5; }
        .header { background: #002147; color: white; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; }
        .test-section { background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .url-item { margin: 0.5rem 0; padding: 1rem; background: #f8f9fa; border-radius: 4px; border-left: 4px solid #002147; }
        .test-btn { background: #E63946; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; cursor: pointer; margin: 0.25rem; }
        .test-btn:hover { background: #d32535; }
        .image-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .image-test { border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center; }
        .image-test img { max-width: 100%; height: 150px; object-fit: cover; border-radius: 4px; }
        .working { border-color: #28a745; background: #f8fff9; }
        .broken { border-color: #dc3545; background: #fff8f8; }
    </style>
</head>
<body>
    <div class="header">
        <h1>🖼️ MAGENTO IMAGE URL TESTER</h1>
        <p>Testing all possible Magento image URL patterns to find working ones</p>
    </div>

    <div class="test-section">
        <h2>🧪 TEST 1: Common Magento Image URL Patterns</h2>
        <button class="test-btn" onclick="testCommonPatterns()">Test Common Patterns</button>
        <div id="common-results"></div>
    </div>

    <div class="test-section">
        <h2>🧪 TEST 2: Direct Product Image URLs</h2>
        <button class="test-btn" onclick="testDirectProductImages()">Test Direct Product Images</button>
        <div id="direct-results"></div>
    </div>

    <div class="test-section">
        <h2>🧪 TEST 3: Alternative Image Sources</h2>
        <button class="test-btn" onclick="testAlternativeSources()">Test Alternative Sources</button>
        <div id="alternative-results"></div>
    </div>

    <div class="test-section">
        <h2>🖼️ IMAGE TEST GRID</h2>
        <div id="image-grid" class="image-grid"></div>
    </div>

    <script>
        // Test common Magento image URL patterns
        function testCommonPatterns() {
            const baseUrls = [
                'https://woodstockoutlet.com/pub/media/catalog/product',
                'https://www.woodstockoutlet.com/pub/media/catalog/product',
                'https://woodstockfurniture.com/pub/media/catalog/product',
                'https://woodstockoutlet.com/media/catalog/product',
                'https://woodstockoutlet.com/skin/frontend/default/exp/images'
            ];

            const samplePaths = [
                '/f/u/fusion-awesome-oatmeal-sofa-39-00KP-right1.jpg',
                '/placeholder/image.jpg',
                '/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/image.jpg',
                '/cache/1/small_image/9df78eab33525d08d6e5fb8d27136e95/image.jpg'
            ];

            const testUrls = [];
            baseUrls.forEach(base => {
                samplePaths.forEach(path => {
                    testUrls.push(base + path);
                });
            });

            displayUrlTests('common-results', testUrls);
            testImageUrls(testUrls);
        }

        // Test direct product image URLs
        function testDirectProductImages() {
            const productSkus = [
                '857087572', // From your Postman collection
                '124985831', // From your Postman collection  
                'NEWPORT-CAMEL-4-PIEC',
                'LYNDON-LAREDO-CANVAS',
                'BRIVIDO-GRAY-LEATHER'
            ];

            const testUrls = [];
            productSkus.forEach(sku => {
                testUrls.push(`https://woodstockoutlet.com/pub/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/${sku}.jpg`);
                testUrls.push(`https://woodstockoutlet.com/pub/media/catalog/product/${sku}.jpg`);
                testUrls.push(`https://woodstockoutlet.com/media/wysiwyg/${sku}.jpg`);
            });

            displayUrlTests('direct-results', testUrls);
            testImageUrls(testUrls);
        }

        // Test alternative image sources
        function testAlternativeSources() {
            const testUrls = [
                'https://woodstockfurniture.net/skin/frontend/default/exp/images/logo.png',
                'https://woodstockoutlet.com/skin/frontend/default/exp/images/logo.png',
                'https://via.placeholder.com/400x300/002147/FFFFFF?text=Test+Image',
                'https://picsum.photos/400/300?random=1',
                'https://source.unsplash.com/400x300/?furniture',
                'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop'
            ];

            displayUrlTests('alternative-results', testUrls);
            testImageUrls(testUrls);
        }

        // Display URL list
        function displayUrlTests(containerId, urls) {
            const container = document.getElementById(containerId);
            const urlsHtml = urls.map((url, index) => `
                <div class="url-item">
                    <strong>URL ${index + 1}:</strong><br>
                    <a href="${url}" target="_blank">${url}</a>
                    <button class="test-btn" onclick="window.open('${url}', '_blank')">Open</button>
                </div>
            `).join('');
            
            container.innerHTML = `
                <div style="margin-top: 1rem;">
                    <strong>Testing ${urls.length} URLs:</strong>
                    ${urlsHtml}
                    <button class="test-btn" onclick="openAllUrls(${JSON.stringify(urls).replace(/"/g, '&quot;')})">🚀 OPEN ALL URLS</button>
                </div>
            `;
        }

        // Test image URLs and display results
        function testImageUrls(urls) {
            const imageGrid = document.getElementById('image-grid');
            
            urls.forEach((url, index) => {
                const testDiv = document.createElement('div');
                testDiv.className = 'image-test';
                testDiv.innerHTML = `
                    <h4>Test ${index + 1}</h4>
                    <img src="${url}" 
                         onload="this.parentElement.classList.add('working'); this.parentElement.querySelector('.status').textContent = '✅ WORKING';"
                         onerror="this.parentElement.classList.add('broken'); this.parentElement.querySelector('.status').textContent = '❌ BROKEN';">
                    <div class="status">🔄 Testing...</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; word-break: break-all;">${url}</div>
                `;
                imageGrid.appendChild(testDiv);
            });
        }

        // Open all URLs in new tabs
        function openAllUrls(urls) {
            if (urls.length > 10) {
                if (!confirm(`This will open ${urls.length} tabs. Continue?`)) return;
            }
            
            urls.forEach((url, index) => {
                setTimeout(() => {
                    window.open(url, `_blank_${index}`);
                }, index * 200); // Stagger opening to avoid browser blocking
            });
        }

        // Auto-run common patterns test on load
        window.addEventListener('load', () => {
            console.log('🧪 Magento Image URL Tester loaded');
        });
    </script>
</body>
</html>

