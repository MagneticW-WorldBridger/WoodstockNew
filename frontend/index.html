<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
                    <title>Woodstock Outlet - Customer Support</title>
    <link rel="stylesheet" href="style_woodstock.css">
    <link rel="stylesheet" href="components.css">
    <link rel="icon" type="image/png" href="https://www.woodstockoutlet.com/media/wysiwyg/uploads/2024/January/wfo-logo.png">
</head>
<body>
    <div class="woodstock-app">
        <!-- Header -->
        <header class="woodstock-header">
            <div class="woodstock-logo">
                <img src="https://www.woodstockoutlet.com/media/wysiwyg/uploads/2024/January/wfo-logo.png" 
                     alt="Woodstock Outlet" 
                     class="woodstock-logo-img"
                     style="background: transparent !important; background-color: transparent !important;"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-fallback" style="display: none;">
                    WOODSTOCK OUTLET
                </div>
            </div>
            
            <div class="demo-button-container">
                <button id="demoButton" class="demo-button" onclick="showDemoInstructions()">
                    üî• DEMO CROSS-CHANNEL MEMORY
                </button>
            </div>
            
            <div class="connection-status">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Connecting...</span>
            </div>
        </header>

        <!-- Main Chat Area -->
        <main class="woodstock-chat-container">
            <!-- Messages Container -->
            <div class="woodstock-messages" id="messagesContainer">
                <!-- Welcome Message -->
                <div class="woodstock-message assistant">
                    <h3>Welcome to Woodstock Outlet Support</h3>
                    <p>I'm your AI assistant, ready to help with:</p>
                    <ul>
                        <li><strong>Customer Lookup:</strong> Find by phone or email</li>
                        <li><strong>Order History:</strong> View complete purchase records</li>
                        <li><strong>Order Details:</strong> Get specific item information</li>
                        <li><strong>Product Recommendations:</strong> Personalized suggestions</li>
                        <li><strong>Support Issues:</strong> Escalate problems to our team</li>
                    </ul>
                    <p style="margin-top: 1rem; color: var(--woodstock-red); font-weight: 500;">
                        Try: "Find customer with phone 407-288-6040"
                    </p>
                </div>
            </div>

            <!-- Input Area -->
            <div class="woodstock-input-container">
                <form id="chatForm" class="woodstock-form">
                    <div class="woodstock-input-wrapper">
                        <textarea 
                            id="messageInput" 
                            class="woodstock-input" 
                            placeholder="Ask about customers, orders, or products..."
                            rows="1"
                            maxlength="1000"
                            autocomplete="off"
                            autocorrect="off"
                            autocapitalize="sentences"
                            spellcheck="true"></textarea>
                        <div class="char-counter" id="charCount">0/1000</div>
                    </div>
                    <button 
                        type="button" 
                        id="clearCacheBtn" 
                        class="woodstock-clear-button"
                        title="Clear conversation cache">
                        üóëÔ∏è Clear
                    </button>
                    <button 
                        type="submit" 
                        id="sendButton" 
                        class="woodstock-send-button"
                        disabled
                        aria-label="Send message">
                        Send
                    </button>
                </form>
            </div>
        </main>
    </div>

    <!-- üî• BUG-030 FIX: Carousel Integration -->
    <!-- Swiffy Slider CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiffy-slider@1.6.0/dist/css/swiffy-slider.min.css">
    
    <!-- Swiffy Slider JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiffy-slider@1.6.0/dist/js/swiffy-slider.min.js"></script>
    
    <!-- HTML Components System -->
    <script src="/env.js"></script>
    <script src="html-components.js"></script>
    <script src="magento-carousel.js"></script>
    <script>
        // override API base dynamically if BACKEND_URL provided by server
        window.addEventListener('DOMContentLoaded', () => {
            if (window.BACKEND_URL && typeof WoodstockChat === 'function') {
                try {
                    // monkey patch constructor default apiBase
                    const orig = WoodstockChat.prototype.constructor;
                    WoodstockChat.prototype.constructor = function() {
                        this.apiBase = window.BACKEND_URL || this.apiBase;
                        return orig.apply(this, arguments);
                    }
                } catch (e) { console.warn('env override failed', e); }
            }
        });
    </script>
    <script src="script_woodstock.js"></script>
</body>
</html>
